require 'autotest/growl' # enable pop-up windows
require 'autotest/restart' # optional: forces autotest to pick the changes to this file
require 'autotest/timestamp' # optional: shows timestamps for test runs

# filter out VCS files and other garbage to reduce HDD usage
Autotest.add_hook(:initialize) {|at|
  at.add_exception %r{^\.git}  # ignore Version Control System
  at.add_exception %r{^./tmp}  # ignore temp files, lest autotest will run again, and again...
  #  at.clear_mappings         # take out the default (test/test*rb)
  at.add_mapping(%r{^lib/.*\.rb$}) {|f, _|
    Dir['spec/**/*.rb']
  }
  nil
}

# do not clear console before running tests
Autotest::Growl::clear_terminal = false

Autotest.add_hook :initialize do |at|
  at.add_mapping(%r%^spec/(integration)/.*rb$%) {|filename, _|
    filename
  }
end